<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-11-28T09:32:44.3186469"><title>MVVM | Jetpack Compose</title><script type="application/json" id="virtual-toc-data">[{"id":"model","level":0,"title":"Model","anchor":"#model"},{"id":"view","level":0,"title":"View","anchor":"#view"},{"id":"view-model","level":0,"title":"View Model","anchor":"#view-model"},{"id":"repositories","level":0,"title":"Repositories","anchor":"#repositories"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b518/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="MVVM | Jetpack Compose"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Jetpack Compose Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/mvvm.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="MVVM | Jetpack Compose"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/mvvm.html#webpage",
    "url": "writerside-documentation/mvvm.html",
    "name": "MVVM | Jetpack Compose",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Jetpack Compose Help"
}</script><!-- End Schema.org --></head><body data-id="MVVM" data-main-title="MVVM" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Jetpack Compose  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="MVVM" id="MVVM.md">MVVM</h1><section class="chapter"><h2 id="model" data-toc="model">Model</h2><p id="-4i5i02_7">Usually, these are a data classes that contain all the elements (usually variables) that helps to create entities. But also, they can be used to manage the application's state.</p><div class="tabs" id="-4i5i02_8" data-anchors="[-4i5i02_10,-4i5i02_9]"><div class="tabs__content" data-gtm="tab" id="-4i5i02_9" data-title="Entities/Models"><div class="code-block" data-lang="kotlin" data-title="Kotlin">
data class Users(
val name : String,
val phoneNumber : Long
)
</div></div><div class="tabs__content" data-gtm="tab" id="-4i5i02_10" data-title="State"><div class="code-block" data-lang="kotlin" data-title="Kotlin">
data class AppState(
val darkMode : Boolean = false,
val isUserLogged : Boolean = false 
)
</div></div></div></section><section class="chapter"><h2 id="view" data-toc="view">View</h2><p id="-4i5i02_13">In this package module goes all the <code class="code" id="-4i5i02_15">@Composable</code> views or screens that the user see. It means, this package contains all the UI.</p><aside class="prompt" data-type="tip" data-title="" id="-4i5i02_14"><p id="-4i5i02_16"><span class="control" id="-4i5i02_18">How do I know it is a view??</span></p><p id="-4i5i02_17">Usually, the views have a scaffold as a main container.</p></aside></section><section class="chapter"><h2 id="view-model" data-toc="view-model">View Model</h2><p id="-4i5i02_19">These classes contain all the functions that make the app works. It means, all the business logic that usually manipulates <code class="code" id="-4i5i02_25">Models</code> that contains <code class="code" id="-4i5i02_26">Entities</code> or <code class="code" id="-4i5i02_27">States</code> to change them in real-time and communicate with the UI.</p><section class="chapter"><h3 id="syntax" data-toc="syntax">Syntax</h3><section class="chapter"><h4 id="classes" data-toc="classes">Classes</h4><p id="-4i5i02_31">As it was said above, a View Model needs a class to storage variables and functions, but it can not be a regular class, it requires a special declaration to work properly:</p><div class="code-block" data-lang="kotlin">
class classViewModel : ViewModel() { ... }
</div><p id="-4i5i02_33">View model provides a communication channel between the UI and the View Model, but can not communicate with other elements such as <code class="code" id="-4i5i02_37">Interfaces</code>.</p><p id="-4i5i02_34">It is usually fixed with <a href="dagger-hilt.html" id="-4i5i02_38" data-tooltip="Hilt is a dependency injection library for Android that reduces the boilerplate of doing manual dependency injection in your project. Doing manual dependency injection requires you to construct every class and its dependencies by hand, and to use containers to reuse and manageâ€¦">Hilt and Dagger</a>, but if for any reason, the apps require to communicate with another components it must be done as follows:</p><div class="code-block" data-lang="kotlin">
class viewModel(application: Application) : AndroidViewModel(application = application){ 
    ... 
}
</div><p>#### Variables </p><p id="-4i5i02_36">Usually, when you are working with a View Model you have to restrict the access to the variables, it means a variable could only be read but never be edited from outside the View Model (Unless via a function).</p></section><section class="chapter"><h4 id="var-declarations" data-toc="var-declarations">Var Declarations</h4><div class="tabs" id="-4i5i02_39" data-anchors="[-4i5i02_40,-4i5i02_41]"><div class="tabs__content" data-gtm="tab" id="-4i5i02_40" data-title="Option 1"><div class="code-block" data-lang="kotlin" data-title="Kotlin">
// The value could be of any Kotlin var type 
private var _valName = mutableStateOf(value = Any)
// To access to the var value it must include the .value
var valName : State&lt;Any&gt; = _prize
// If the val is a flow 
private val _valName = MutableStateFlow(Any)
val valName = _valName.asStateFlow()
// Another Flow declaration
private val _valName = MutableStateFlow&lt;Any&gt;(Any)
val valName : StateFlow&lt;Any&gt; = _valName
// Setter function
fun setVarValue(value : Any){
    _varName.value = value
}
</div></div><div class="tabs__content" data-gtm="tab" id="-4i5i02_41" data-title="Option 2"><div class="code-block" data-lang="kotlin" data-title="Kotlin">
// This way you need to create a setter function to change its value
 var varName by mutableStateOf(value = Any)
        private set
// Setter function
fun setVarValue(value : Any){
    varName = value
}
</div></div></div></section><section class="chapter"><h4 id="var-usage" data-toc="var-usage">Var Usage</h4><div class="tabs" id="-4i5i02_44" data-anchors="[-4i5i02_50,-4i5i02_51]"><div class="tabs__content" data-gtm="tab" id="-4i5i02_50" data-title="Using Option 1"><div class="code-block" data-lang="kotlin" data-title="Kotlin">
// option1 represents the view model of the Option1 from above
val newVal = option1.valName.value
// If the val is a Flow
val flowVal by option1.valName.collectAsState()

</div></div><div class="tabs__content" data-gtm="tab" id="-4i5i02_51" data-title="Using Option 2"><div class="code-block" data-lang="kotlin" data-title="Kotlin">
// option2 represents the view model of the Option2 from above
val newVal = option2.valName

</div></div></div><aside class="prompt" data-type="note" data-title="" id="-4i5i02_45"><p id="-4i5i02_54"><span class="control" id="-4i5i02_56">Why &quot;by&quot; and not &quot;=&quot;?</span></p><p id="-4i5i02_55">Both can be used, but when using &quot;=&quot; you have to add the &quot;.value&quot; to access to its value.</p></aside><p id="-4i5i02_46">Usually, when working with Models (Not States) we have two ways to create variables a functions to access and manipulate its content.</p><p id="-4i5i02_47">Let us use the following data class as an example:</p><div class="code-block" data-lang="kotlin">
data class users(
    val name : String,
    val age : Int,
    val address : String,
    ...
)
</div><div class="tabs" id="-4i5i02_49" data-anchors="[-4i5i02_57,-4i5i02_58]"><div class="tabs__content" data-gtm="tab" id="-4i5i02_57" data-title="Using the Model"><div class="code-block" data-lang="kotlin" data-title="Kotlin">
class UserViewModel : ViewModel(){
    val data by mutableStateOf(users(
        name = &quot;&quot;, 
        age = 0,
        address =&quot;&quot;))
        private set
// If is a Flow
private val _user = MutableStateFlow(users(
        name = &quot;&quot;, 
        age = 0,
        address =&quot;&quot;))
    val user = _valName.asStateFlow()
//  External Setter
    fun modifyUser(user : user){
            data = user
    }
// External Setter for a Flow 
    fun changeFlowValue(){
        viewModelScope.launch(Dispatchers.IO){
        _test.value = suspendFunction()
        [...]
        }
    }
}
</div></div><div class="tabs__content" data-gtm="tab" id="-4i5i02_58" data-title="Using a State"><p>Second tab content</p></div></div></section></section><section class="chapter"><h3 id="coroutines" data-toc="coroutines">Coroutines</h3><p id="-4i5i02_60">ViewModels also allows to create coroutines:</p><div class="code-block" data-lang="kotlin">
viewModelScope.launch(/*Add Dispatchers Here*/){ ... }
</div></section><section class="chapter"><h3 id="init" data-toc="init">Init</h3><p id="-4i5i02_62">If you need to create a function that must be done whenever the viewModel is called, then it must be added inside the <code class="code" id="-4i5i02_64">Init</code> scope function.</p><div class="code-block" data-lang="kotlin">
init { ... }
</div></section><section class="chapter"><h3 id="use" data-toc="use">Use</h3><div class="code-block" data-lang="kotlin">
val viewModel: MyViewModel by viewModels()
</div></section><section class="chapter"><h3 id="summary" data-toc="summary">Summary</h3><p id="-4i5i02_66">The key benefits of the ViewModel class are essentially two:</p><ul class="list _bullet" id="-4i5i02_67"><li class="list__item" id="-4i5i02_68"><p>It allows you to persist UI state.</p></li><li class="list__item" id="-4i5i02_69"><p>It provides access to business logic.</p></li></ul></section></section><section class="chapter"><h2 id="repositories" data-toc="repositories">Repositories</h2></section><div class="last-modified">Last modified: 28 noviembre 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="compose.html" class="navigation-links__prev">Compose</a><a href="navigation.html" class="navigation-links__next">TODO: Navigation</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b518/app.js"></script></body></html>